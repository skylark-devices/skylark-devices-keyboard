/**
 * skylark-devices-keyboard - The keyboard  utility library.
 * @author Hudaokeji Co.,Ltd
 * @version v0.9.1
 * @link www.skylarkjs.org
 * @license MIT
 */
!function(r,n){var t=n.define,require=n.require,e="function"==typeof t&&t.amd,i=!e&&"undefined"!=typeof exports;if(!e&&!t){var s={};t=n.define=function(r,n,t){"function"==typeof t?(s[r]={factory:t,deps:n.map(function(n){return function(r,n){if("."!==r[0])return r;var t=n.split("/"),e=r.split("/");t.pop();for(var i=0;i<e.length;i++)"."!=e[i]&&(".."==e[i]?t.pop():t.push(e[i]));return t.join("/")}(n,r)}),resolved:!1,exports:null},require(r)):s[r]={factory:null,resolved:!0,exports:t}},require=n.require=function(r){if(!s.hasOwnProperty(r))throw new Error("Module "+r+" has not been defined");var module=s[r];if(!module.resolved){var t=[];module.deps.forEach(function(r){t.push(require(r))}),module.exports=module.factory.apply(n,t)||null,module.resolved=!0}return module.exports}}if(!t)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(r,require){r("skylark-langx-ns/_attach",[],function(){return function(r,n,t){"string"==typeof n&&(n=n.split("."));for(var e=n.length,i=r,s=0,o=n[s++];s<e;)i=i[o]=i[o]||{},o=n[s++];return i[o]=t}}),r("skylark-langx-ns/ns",["./_attach"],function(r){var n={attach:function(t,e){return r(n,t,e)}};return n}),r("skylark-langx-ns/main",["./ns"],function(r){return r}),r("skylark-langx-ns",["skylark-langx-ns/main"],function(r){return r}),r("skylark-devices-keyboard/keyboard",["skylark-langx-ns"],function(r){var n={isShiftDown:function(r){return null!=r&&r.shiftKey},isAltDown:function(r){return null!=r&&r.altKey},isControlDown:function(r){return null!=r&&r.ctrlKey},isMetaDown:function(r){return null!=r&&r.metaKey},TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,INSERT:45,DEL:46,LEFT:37,RIGHT:39,UP:38,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,NUM9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123};return r.attach("devices.keyboard",n)}),r("skylark-langx-types/types",["skylark-langx-ns"],function(r){var n,t=Array.isArray,e={}.toString,i=(n={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(r){n["[object "+r+"]"]=r.toLowerCase()}),function(r){return null==r?String(r):n[e.call(r)]||"object"}),s=t||function(r){return object&&object.constructor===Array};function o(r){var n;for(n in r)if(null!==r[n])return!1;return!0}function a(r){return"function"==i(r)}function u(r){return r&&r.nodeType}function l(r){return"number"==typeof r}function c(r){var n=typeof r;return"function"===n||"object"===n&&!!r}function f(r){return"string"==typeof r}function y(r){return r&&r==r.window}return r.attach("langx.types",{isArray:s,isArrayLike:function(r){return!f(r)&&!u(r)&&"number"==typeof r.length&&!a(r)},isBoolean:function(r){return!0===r||!1===r||"[object Boolean]"===e.call(r)},isDefined:function(r){return void 0!==r},isDocument:function(r){return null!=r&&r.nodeType==r.DOCUMENT_NODE},isElement:function(r){return!(!r||1!==r.nodeType)},isEmpty:o,isEmptyObject:o,isFunction:a,isHtmlNode:u,isNaN:function(r){return isNaN(r)},isNull:function(r){return null===r},isNumber:l,isNumeric:l,isObject:c,isPlainObject:function(r){return c(r)&&!y(r)&&Object.getPrototypeOf(r)==Object.prototype},isString:f,isSameOrigin:function(r){if(r){var n=location.protocol+"//"+location.hostname;return location.port&&(n+=":"+location.port),r.startsWith(n)}},isSymbol:function(r){return"symbol"==typeof r||isObjectLike(r)&&objectToString.call(r)==symbolTag},isUndefined:function(r){return void 0===r},isWindow:y,type:i})}),r("skylark-langx-types/main",["./types"],function(r){return r}),r("skylark-langx-types",["skylark-langx-types/main"],function(r){return r}),r("skylark-langx-numbers/numbers",["skylark-langx-ns","skylark-langx-types"],function(r,n){var t=n.isObject,e=n.isSymbol,i=1/0,s=1.7976931348623157e308,o=NaN,a=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;function y(r){if(!r)return 0===r?r:0;if((r=p(r))===i||r===-i){var n=r<0?-1:1;return n*s}return r==r?r:0}function p(r){if("number"==typeof r)return r;if(e(r))return o;if(t(r)){var n="function"==typeof r.valueOf?r.valueOf():r;r=t(n)?n+"":n}if("string"!=typeof r)return 0===r?r:+r;r=r.replace(a,"");var i=l.test(r);return i||c.test(r)?f(r.slice(2),i?2:8):u.test(r)?o:+r}return r.attach("langx.numbers",{toFinite:y,toNumber:p,toInteger:function(r){var n=y(r),t=n%1;return n==n?t?n-t:n:0}})}),r("skylark-langx-numbers/main",["./numbers"],function(r){return r}),r("skylark-langx-numbers",["skylark-langx-numbers/main"],function(r){return r}),r("skylark-langx-objects/objects",["skylark-langx-ns/ns","skylark-langx-ns/_attach","skylark-langx-types","skylark-langx-numbers"],function(r,n,t,e){var i,s,o=Object.prototype.hasOwnProperty,a=Array.prototype.slice,u=t.isBoolean,l=t.isFunction,c=t.isObject,f=t.isPlainObject,y=t.isArray,p=t.isArrayLike,h=t.isString,k=e.toInteger;var d,v,g="undefined"!=typeof Symbol?Symbol.prototype:null;function b(r){if(!c(r))return[];var n=[];for(var t in r)n.push(t);return n}function x(r,n){if(!y(n))return null!=r&&o.call(r,n);for(var t=n.length,e=0;e<t;e++){var i=n[e];if(null==r||!o.call(r,i))return!1;r=r[i]}return!!t}function m(r,n,t,e){for(var i in n)e&&void 0!==r[i]||(t&&(f(n[i])||y(n[i]))?(f(n[i])&&!f(r[i])&&(r[i]={}),y(n[i])&&!y(r[i])&&(r[i]=[]),m(r[i],n[i],t,e)):void 0!==n[i]&&(r[i]=n[i]));return r}function j(r){var n=a.call(arguments,0),t=n.shift(),e=!1;return u(n[n.length-1])&&(e=n.pop()),{target:t,sources:n,deep:e}}function O(){var r=j.apply(this,arguments);return r.sources.forEach(function(n){m(r.target,n,r.deep,!1)}),r.target}function _(r){for(var n=b(r),t=n.length,e=Array(t),i=0;i<t;i++)e[i]=r[n[i]];return e}return i=function(r,n,t,e){if(r===n)return 0!==r||1/r==1/n;if(null==r||null==n)return!1;if(r!=r)return n!=n;var i=typeof r;return("function"===i||"object"===i||"object"==typeof n)&&s(r,n,t,e)},s=function(r,n,t,e){var s=toString.call(r);if(s!==toString.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+r==""+n;case"[object Number]":return+r!=+r?+n!=+n:0==+r?1/+r==1/n:+r==+n;case"[object Date]":case"[object Boolean]":return+r==+n;case"[object Symbol]":return g.valueOf.call(r)===g.valueOf.call(n)}var o="[object Array]"===s;if(!o){if("object"!=typeof r||"object"!=typeof n)return!1;var a=r.constructor,u=n.constructor;if(a!==u&&!(l(a)&&a instanceof a&&l(u)&&u instanceof u)&&"constructor"in r&&"constructor"in n)return!1}t=t||[],e=e||[];for(var c=t.length;c--;)if(t[c]===r)return e[c]===n;if(t.push(r),e.push(n),o){if((c=r.length)!==n.length)return!1;for(;c--;)if(!i(r[c],n[c],t,e))return!1}else{var f,y=Object.keys(r);if(c=y.length,Object.keys(n).length!==c)return!1;for(;c--;)if(f=y[c],void 0===n[f]||!i(r[f],n[f],t,e))return!1}return t.pop(),e.pop(),!0},r.attach("langx.objects",{allKeys:b,attach:n,clone:function r(n,t){var e;if(void 0===n||null===n)e=n;else if(t&&n.clone)e=n.clone();else if(y(n)){e=[];for(var i=0;i<n.length;i++)e.push(r(n[i]))}else if(f(n))for(var s in e={},n)e[s]=r(n[s]);else e=n;return e},defaults:(d=b,v=!0,function(r){var n=arguments.length;if(v&&(r=Object(r)),n<2||null==r)return r;for(var t=1;t<n;t++)for(var e=arguments[t],i=d(e),s=i.length,o=0;o<s;o++){var a=i[o];v&&void 0!==r[a]||(r[a]=e[a])}return r}),each:function(r,n){var t,e,i,s;if(r)if(void 0===(t=r.length)){for(e in r)if(r.hasOwnProperty(e)&&(s=r[e],!1===n.call(s,e,s)))break}else for(i=0;i<t&&(s=r[i],!1!==n.call(s,i,s));i++);return this},extend:function(r){var n,t=a.call(arguments,1);"boolean"==typeof r&&(n=r,r=t.shift());0==t.length&&(t=[r],r=this);return t.forEach(function(t){O(r,t,n)}),r},has:x,isEqual:function(r,n){return i(r,n)},includes:function(r,n,t,e){r=p(r)?r:_(r),t=t&&!e?k(t):0;var i=r.length;t<0&&(t=nativeMax(i+t,0));return h(r)?t<=i&&r.indexOf(n,t)>-1:!!i&&baseIndexOf(r,n,t)>-1},isMatch:function(r,n){var t=t(n),e=t.length;if(null==r)return!e;for(var i=Object(r),s=0;s<e;s++){var o=t[s];if(n[o]!==i[o]||!(o in i))return!1}return!0},keys:function(r){if(c(r))return[];var n=[];for(var t in r)x(r,t)&&n.push(t);return n},mixin:O,omit:function(r,n,t){if(!r)return null;for(var e=O({},r),i=1;i<arguments.length;i++){var s=arguments[i];s in r&&delete e[s]}return e},pick:function(r,n,t){if(!r)return null;for(var e={},i=1;i<arguments.length;i++){var s=arguments[i];s in r&&(e[s]=r[s])}return e},removeItem:function(r,n){if(y(r)){var t=r.indexOf(n);-1!=t&&r.splice(t,1)}else if(f(r))for(var e in r)if(r[e]==n){delete r[e];break}return this},result:function(r,n,t){y(n)||(n=n.split("."));var e=n.length;if(!e)return l(t)?t.call(r):t;for(var i=0;i<e;i++){var s=null==r?void 0:r[n[i]];void 0===s&&(s=t,i=e),r=l(s)?s.call(r):s}return r},safeMixin:function(){var r=j.apply(this,arguments);return r.sources.forEach(function(n){m(r.target,n,r.deep,!0)}),r.target},values:_})}),r("skylark-langx-objects/main",["./objects"],function(r){return r}),r("skylark-langx-objects",["skylark-langx-objects/main"],function(r){return r}),r("skylark-langx-arrays/arrays",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects"],function(r,n,t){var e=Array.prototype.filter,i=Array.prototype.find,s=n.isArrayLike;function o(r,n,t,e){for(var i=r.length,s=t+(e?1:-1);e?s--:++s<i;)if(n(r[s],s,r))return s;return-1}function a(r){return r!=r}function u(r){if(s(r)){for(var n=[],t=0;t<r.length;t++){var e=r[t];if(s(e))for(var i=0;i<e.length;i++)n.push(e[i]);else n.push(e)}return n}return r}return r.attach("langx.arrays",{baseFindIndex:o,baseIndexOf:function(r,n,t){if(n!=n)return o(r,a,t);var e=t-1,i=r.length;for(;++e<i;)if(r[e]===n)return e;return-1},compact:function(r){return e.call(r,function(r){return null!=r})},first:function(r,n){return n?r.slice(0,n):r[0]},filter:function(r,n){return e.call(r,n)},find:function(r,n){return i.call(r,n)},flatten:u,grep:function(r,n){var e=[];return t.each(r,function(r,t){n(t,r)&&e.push(t)}),e},inArray:function(r,n){if(!n)return-1;var t;if(n.indexOf)return n.indexOf(r);t=n.length;for(;t--;)if(n[t]===r)return t;return-1},makeArray:function(r,n,t){if(s(r))return(t||[]).concat(Array.prototype.slice.call(r,n||0));return[r]},merge:function(r,n){var t=n.length,e=r.length,i=0;if("number"==typeof t)for(;i<t;i++)r[e++]=n[i];else for(;void 0!==n[i];)r[e++]=n[i++];return r.length=e,r},forEach:function(r,n){if(r.forEach)return r.forEach(n);for(var t=0;t<r.length;t++)n(r[t],t)},map:function(r,n){var t,e,i,o=[];if(s(r))for(e=0;e<r.length;e++)null!=(t=n.call(r[e],r[e],e))&&o.push(t);else for(i in r)null!=(t=n.call(r[i],r[i],i))&&o.push(t);return u(o)},reduce:function(r,n,t){return Array.prototype.reduce.call(r,n,t)},uniq:function(r){return e.call(r,function(n,t){return r.indexOf(n)==t})}})}),r("skylark-langx-arrays/main",["./arrays"],function(r){return r}),r("skylark-langx-arrays",["skylark-langx-arrays/main"],function(r){return r}),r("skylark-langx-klass/klass",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays"],function(r,n,t,e){var i=e.uniq,s=t.has,o=t.mixin,a=n.isArray,u=n.isDefined;var l=function(){function r(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return function t(e,l,c,f){a(l)&&(f=c,c=l,l=null),l=l||Object,u(c)&&!a(c)&&(f=c,c=!1);var y=l;c&&(c=function(r,n){var t=[];return n.forEach(function(r){if(s(r,"__mixins__"))throw new Error("nested mixins");for(var n=[];r;)n.unshift(r),r=r.superclass;t=t.concat(n)}),(t=(t=i(t)).filter(function(n){for(var t=r;t;){if(n===t)return!1;if(s(t,"__mixins__"))for(var e=t.__mixins__,i=0;i<e.length;i++)if(e[i]===n)return!1;t=t.superclass}return!0})).length>0&&t}(y,c)),c&&(y=function(r,n){for(var t=r,e=0;e<n.length;e++){var i=new Function;i.prototype=Object.create(t.prototype),i.__proto__=t,i.superclass=null,o(i.prototype,n[e].prototype),i.prototype.__mixin__=n[e],t=i}return t}(y,c));var p=e.klassName||"",h=new Function("return function "+p+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return h.prototype=Object.create(y.prototype),h.prototype.constructor=h,h.superclass=l,h.__proto__=y,h._constructor||(h._constructor=r),c&&(h.__mixins__=c),h.partial||(h.partial=function(r,t){return function(r,t,e){var i=r.prototype,s=r.superclass.prototype,o=e&&e.noOverrided;e&&e.overrides;for(var a in t)if("constructor"!==a){var u=t[a];"function"==typeof t[a]?i[a]=u._constructor||o||"function"!=typeof s[a]?u:function(r,n,t){return function(){var r=this.overrided;this.overrided=t;var e=n.apply(this,arguments);return this.overrided=r,e}}(0,u,s[a]):n.isPlainObject(u)&&null!==u&&u.get?Object.defineProperty(i,a,u):i[a]=u}return r}(this,r,t)}),h.inherit||(h.inherit=function(r,n,e){return t(r,this,n,e)}),h.partial(e,f),h}}();return r.attach("langx.klass",l)}),r("skylark-langx-klass/main",["./klass"],function(r){return r}),r("skylark-langx-klass",["skylark-langx-klass/main"],function(r){return r}),r("skylark-devices-keyboard/Key",["skylark-langx-klass","./keyboard"],function(r,n){"use strict";var t=r({_construct:function(){this.pressed=!1,this.justPressed=!1,this.justReleased=!1},update:function(r){this.justPressed=!1,this.justReleased=!1,r===t.DOWN?(!1===this.pressed&&(this.justPressed=!0),this.pressed=!0):r===t.UP?(this.pressed&&(this.justReleased=!0),this.pressed=!1):r===t.RESET&&(this.justReleased=!1,this.justPressed=!1)},set:function(r,n,t){this.justPressed=r,this.pressed=n,this.justReleased=t},reset:function(){this.justPressed=!1,this.pressed=!1,this.justReleased=!1}});return t.DOWN=-1,t.UP=1,t.RESET=0,n.Key=t}),r("skylark-devices-keyboard/Monitor",["skylark-langx-klass","./keyboard","./Key"],function(r,n,t){"use strict";var e=r({_construct:function(r){this.keys=[],this.actions=[];var n=this,e=this.actions;this.handlers={keydown:function(r){e.push(r.keyCode),e.push(t.DOWN)},keyup:function(r){e.push(r.keyCode),e.push(t.UP)},focus:function(r){n.reset()}},!0!==r&&this.create()},update:function(){for(var r=0;this.actions.length>r;){var n=this.actions.shift(),e=this.actions.shift();void 0===this.keys[n]&&(this.keys[n]=new t),this.keys[n].update(e),(this.keys[n].justReleased||this.keys[n].justPressed)&&(this.actions.push(n),this.actions.push(t.RESET),r+=2)}},reset:function(){for(var r=0;r<this.keys.length;r++)void 0!==this.keys[r]&&this.keys[r].reset()},keyPressed:function(r){return void 0!==this.keys[r]&&this.keys[r].pressed},keyJustPressed:function(r){return void 0!==this.keys[r]&&this.keys[r].justPressed},keyJustReleased:function(r){return void 0!==this.keys[r]&&this.keys[r].justReleased},create:function(){for(var r in this.handlers)window.addEventListener(r,this.handlers[r])},dispose:function(){for(var r in this.handlers)window.removeEventListener(r,this.handlers[r])}});return n.Monitor=e}),r("skylark-devices-keyboard/main",["./keyboard","./Key","./Monitor"],function(r){return r}),r("skylark-devices-keyboard",["skylark-devices-keyboard/main"],function(r){return r})}(t),!e){var o=require("skylark-langx-ns");i?module.exports=o:n.skylarkjs=o}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-devices-keyboard-all.js.map
